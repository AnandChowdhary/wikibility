var app=angular.module("wikibility",["ngRoute"]);app.config(function(t,e){t.when("/",{templateUrl:"home.html",controller:"homeCtrl"}).when("/wiki/:slug",{templateUrl:"article.html",controller:"articleCtrl"}),e.html5Mode(!0)}),app.factory("wikiService",function(t,e){var r={query:function(r){var a="https://en.wikipedia.org/w/api.php?action=parse&prop=text&page="+r.q+"&format=json&section="+r.section,n=e.trustAsResourceUrl(a);return t.jsonp(n,{jsonpCallbackParam:"callback"})},article:function(r){var a="https://en.wikipedia.org/w/api.php?action=parse&prop=text&page="+r.q+"&format=json",n=e.trustAsResourceUrl(a);return t.jsonp(n,{jsonpCallbackParam:"callback"})},search:function(r){var a="https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch="+r.q+"&utf8=&format=json",n=e.trustAsResourceUrl(a);return t.jsonp(n,{jsonpCallbackParam:"callback"})}};return r}),app.controller("homeCtrl",function(t,e,r){t.searchArticle=function(){e.path("/wiki/"+t.searchModel.replace(/ /g,"_"))},t.searchWiki=function(){void 0!==t.searchModel&&r.search({q:t.searchModel,section:0}).then(function(e){t.searchResults=e.data.query.search})}}),app.controller("articleCtrl",function(t,e,r,a,n,o){document.getElementById("paradeiser-dropdown").addEventListener("click",function(t){t.preventDefault(),document.getElementById("paradeiser-more").classList.toggle("open")}),document.getElementById("greybox").addEventListener("click",function(t){t.preventDefault(),document.getElementById("paradeiser-more").classList.remove("open")});var i=document.querySelector(".paradeiser"),l=new Headroom(i,{tolerance:5,onUnpin:function(){document.getElementById("paradeiser-more").classList.remove("open")}});l.init(),a.query({q:e.slug,section:0}).then(function(i){a.article({q:e.slug}).then(function(e){var a=e.data.parse.text["*"].split('<div id="toc" class="toc">')[1];t.sections=r.trustAsHtml(a),n(function(){angular.element("#redirectMsg")&&o.path(angular.element(".redirectText a").attr("href")),smartquotes();var t=0;angular.element("sup").each(function(){t++,$(this).find("a").html(t),$(this).find("a").attr("href","#cite_note-"+t),$(this).mouseover(function(){$(".ref-tooltip").fadeIn(200),$(".ref-tooltip").css("left",$(this).offset().left+"px"),$(".ref-tooltip").css("top",$(this).offset().top+25+"px"),$(".ref-tooltip").html(angular.element($(this).find("a").attr("href")).html())}),$(this).mouseout(function(){$(".ref-tooltip").fadeOut(200)})}),angular.element("a").each(function(){var t=new RegExp("/"+window.location.host+"/");t.test(this.href)||$(this).attr("target","_blank")})},1)}),t.wikiTitle=i.data.parse.title,t.wikiData=r.trustAsHtml(i.data.parse.text["*"]),n(function(){smartquotes(),angular.element("sup").each(function(){$(this).find("a").html("")})},1)})}),app.filter("wikipediafy",function(){return function(t){return t.replace(/ /g,"_")}});
//# sourceMappingURL=./app-min.js.map