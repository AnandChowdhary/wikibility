var app=angular.module("wikibility",["ngRoute"]);app.config(function(t,e){t.when("/",{templateUrl:"home.html",controller:"homeCtrl"}).when("/wiki/:slug",{templateUrl:"article.html",controller:"articleCtrl"}),e.html5Mode(!0)}),app.factory("wikiService",function(t,e){var n={query:function(n){var a="https://en.wikipedia.org/w/api.php?action=parse&prop=text&page="+n.q+"&format=json&section="+n.section,r=e.trustAsResourceUrl(a);return t.jsonp(r,{jsonpCallbackParam:"callback"})},article:function(n){var a="https://en.wikipedia.org/w/api.php?action=parse&prop=text&page="+n.q+"&format=json",r=e.trustAsResourceUrl(a);return t.jsonp(r,{jsonpCallbackParam:"callback"})},nSections:function(n){var a="https://en.wikipedia.org/w/api.php?action=parse&page="+n.q+"&prop=sections&format=json",r=e.trustAsResourceUrl(a);return t.jsonp(r,{jsonpCallbackParam:"callback"})}};return n}),app.controller("homeCtrl",function(t,e){t.searchArticle=function(){e.path("/wiki/"+t.searchModel.replace(/ /g,"_"))}}),app.controller("articleCtrl",function(t,e,n,a,r){document.getElementById("paradeiser-dropdown").addEventListener("click",function(t){t.preventDefault(),document.getElementById("paradeiser-more").classList.toggle("open")}),document.getElementById("greybox").addEventListener("click",function(t){t.preventDefault(),document.getElementById("paradeiser-more").classList.remove("open")});var o=document.querySelector(".paradeiser"),i=new Headroom(o,{tolerance:5,onUnpin:function(){document.getElementById("paradeiser-more").classList.remove("open")}});i.init(),a.query({q:e.slug,section:0}).then(function(o){a.article({q:e.slug}).then(function(e){var a=e.data.parse.text["*"].split('<div id="toc" class="toc">')[1];t.sections=n.trustAsHtml(a),r(function(){smartquotes();var t=0;angular.element("sup").each(function(){t++,$(this).find("a").html(t),$(this).find("a").attr("href","#cite_note-"+t),$(this).mouseover(function(){$(".ref-tooltip").fadeIn(200),$(".ref-tooltip").css("left",$(this).offset().left+"px"),$(".ref-tooltip").css("top",$(this).offset().top+25+"px"),$(".ref-tooltip").html(angular.element($(this).find("a").attr("href")).html())}),$(this).mouseout(function(){$(".ref-tooltip").fadeOut(200)})}),angular.element("a").each(function(){var t=new RegExp("/"+window.location.host+"/");t.test(this.href)||$(this).attr("target","_blank")})},1)}),t.wikiTitle=o.data.parse.title,t.wikiData=n.trustAsHtml(o.data.parse.text["*"]),r(function(){smartquotes(),angular.element("sup").each(function(){$(this).find("a").html("")})},1)})});
//# sourceMappingURL=./app-min.js.map